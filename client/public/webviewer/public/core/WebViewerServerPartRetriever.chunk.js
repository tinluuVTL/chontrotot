/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[13],{559:function(wa,ta,h){function pa(){return!1}function na(ca,ea,fa){if(!(ea in w))return!0;ea=w[ea];for(var x=0;x<ea.length;x++){var ba=ca;var aa=ea[x];var ma=fa;if(aa.name in ba){var ia="",ja=!1;ba=ba[aa.name];switch(aa.type){case "s":ia="String";ja=Object(la.isString)(ba);break;case "a":ia="Array";ja=Object(la.isArray)(ba);break;case "n":ia="Number";ja=Object(la.isNumber)(ba)&&Object(la.isFinite)(ba);break;case "o":ia="Object",
ja=Object(la.isObject)(ba)&&!Object(la.isArray)(ba)}ja||ma.reject('Expected response field "'+aa.name+'" to have type '+ia);aa=ja}else ma.reject('Response missing field "'+aa.name+'"'),aa=!1;if(!aa)return!1}return!0}function oa(ca){for(var ea=0,fa=["locale","excelMaxAllowedCellCount","applyPageBreaksToSheet","excelDefaultCellBorderWidth","displayChangeTracking"];ea<fa.length;ea++){var x=fa[ea],ba=x;x=x.charAt(0).toUpperCase()+x.slice(1);ca[ba]&&(Object.defineProperty(ca,x,Object.getOwnPropertyDescriptor(ca,
ba)),delete ca[ba])}return ca}h.r(ta);var ka=h(0),la=h(1);h.n(la);var ha=h(3);wa=h(55);var z=h(33),y=h(577),r=h(117),n=h(469),b=h(52),a=h(202),e=function(){function ca(){this.request=this.result=null;this.state=0;var ea=this;ea.promise=new Promise(function(fa,x){ea.resolve=function(){if(0===ea.state||4===ea.state)ea.state=1,ea.result=arguments[0],fa.apply(null,arguments)};ea.reject=function(){if(0===ea.state||4===ea.state)ea.state=2,x.apply(null,arguments)}})}ca.prototype.Fw=function(){return 1===
(this.state&1)};ca.prototype.dta=function(){return 2===(this.state&2)};ca.prototype.Gk=function(){return!this.dta()&&!this.Fw()};ca.prototype.Asa=function(){return 4===(this.state&4)};ca.prototype.BT=function(){this.state|=4};return ca}(),f=function(){function ca(){this.mw={};this.pc=[]}ca.prototype.pop=function(){var ea=this.pc.pop();this.mw[ea.key]=void 0;return ea};ca.prototype.push=function(ea,fa){fa={key:ea,data:fa};this.pc.push(fa);this.mw[ea]=fa.data};ca.prototype.contains=function(ea){return!!this.mw[ea]};
ca.prototype.get=function(ea){return this.mw[ea]};ca.prototype.set=function(ea,fa){var x=this;this.mw[ea]=fa;this.pc.forEach(function(ba,aa){ba.key===ea&&(x.pc[aa]=ba)})};ca.prototype.remove=function(ea){var fa=this;this.mw[ea]=void 0;this.pc.forEach(function(x,ba){x.key===ea&&fa.pc.splice(ba,1)})};ca.prototype.length=function(){return this.pc.length};return ca}(),w={pages:[{name:"pages",type:"a"}],pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},{name:"rID",type:"s"}],health:[],tiles:[{name:"z",
type:"n"},{name:"rID",type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],cAnnots:[{name:"annots",type:"a"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],ApString2Xod:[{name:"url",type:"s"},{name:"rID",type:"s"}]};h=function(){function ca(ea,fa,x){var ba=this;this.pU=this.a0=!1;this.Di=this.SK=this.ey=this.Ef=this.xz=this.er=this.wz=this.up=
null;this.Vo=new e;this.xs=new e;this.gG=!1;this.Rg=this.If=this.Jf=this.Fg=null;this.nh=[];this.ZG=[];this.cache={};this.timeStamp=0;this.yi=[];this.Pk=[];this.TO=null;this.O_=!1;this.w8=this.id=null;this.vR=this.l3=pa;this.Bj=0;this.tQ=!1;this.p5=1;this.Mk={};this.cv=0;this.mx=new f;fa.endsWith("/")||(fa+="/");x=x||{};this.a0=x.disableWebsockets||!1;this.pU=x.singleServerMode||!1;null!=x.customQueryParameters&&Object(b.b)("wvsQueryParameters",x.customQueryParameters);fa.endsWith("blackbox/")||(fa+=
"blackbox/");this.up=x.uploadData||null;this.ey=x.uriData||null;this.wz=x.cacheKey||null;if(this.er=x.officeOptions||null)this.er=oa(this.er);this.Ef=x.rasterizerOptions||null;this.xz=x.cadOptions||null;this.fg=fa;this.rO=ea;this.pr(!0);this.wv=(new y.a(fa,null,this.kj())).Mna(!this.a0,function(aa){ba.dva(aa)},function(){return null},function(){ba.gG=!1},function(){ba.Kya()})}ca.prototype.Xja=function(){var ea=this;return new Promise(function(fa,x){var ba=new XMLHttpRequest;ba.open("GET",ea.fg+"ck");
ba.withCredentials=ea.kj();ba.onreadystatechange=function(){ba.readyState===XMLHttpRequest.DONE&&(200===ba.status?fa():x())};ba.send()})};ca.prototype.JAa=function(ea){this.l3=ea||pa;this.vR=pa};ca.prototype.kia=function(){this.T7();return this.wv.Ks(!0)};ca.prototype.T7=function(){Object(ka.b)(this,void 0,void 0,function(){return Object(ka.d)(this,function(ea){switch(ea.label){case 0:return this.xs=new e,this.Vo=new e,this.gG=!1,this.id=null,this.O_=!1,[4,this.Xja()];case 1:return ea.ba(),[2]}})})};
ca.prototype.Kya=function(){this.l3();this.T7();this.Fg&&(this.Fg.Gk()?this.Ii(this.Fg.request):this.Fg.Fw()&&this.vR(this.Fg.result.url,"pdf")&&(this.Fg=null,this.R7()));this.Rg&&this.Rg.Gk()&&this.Ii(this.Rg.request);this.Jf&&this.Jf.Gk()?this.Ii(this.Jf.request):this.If&&this.If.Gk()&&this.T2();var ea;for(ea=0;ea<this.yi.length;ea++)this.yi[ea]&&(this.yi[ea].Gk()?this.Ii(this.yi[ea].request):this.yi[ea].Fw()&&this.vR(this.yi[ea].result.url,"image")&&(this.yi[ea]=null,this.IJ(Object(la.uniqueId)(),
ea)));for(ea=0;ea<this.Pk.length;ea++)this.Pk[ea]&&this.Pk[ea].Gk()&&!this.Pk[ea].Asa()&&this.Ii(this.Pk[ea].request);for(ea=0;ea<this.nh.length;ea++)this.nh[ea]&&this.nh[ea].Gk()&&this.Ii(this.nh[ea].request)};ca.prototype.Zra=function(){return this.gG?Promise.resolve():(this.gG=!0,this.timeStamp=Date.now(),this.wv.gI())};ca.prototype.ODa=function(){var ea=this,fa,x,ba,aa,ma;return new Promise(function(ia,ja){if(ea.up)fa=new FormData,fa.append("file",ea.up.fileHandle,ea.up.fileHandle.name),ea.er&&
fa.append("officeOptions",JSON.stringify(ea.er)),ea.Ef&&fa.append("rasterizerOptions",JSON.stringify(ea.Ef)),ea.xz&&fa.append("cadOptions",ea.xz.getJsonString()),ea.wz&&fa.append("cacheKey",ea.wz),x=ea.up.loadCallback,aa="upload",ba=ea.up.extension;else if(ea.ey)fa={uri:ea.ey.uri,$Ha:ea.ey.shareId},fa=Object.keys(fa).map(function(sa){return sa+"="+(fa[sa]?encodeURIComponent(fa[sa]):"")}).join("&"),ma="application/x-www-form-urlencoded; charset=UTF-8",x=ea.ey.loadCallback,aa="url",ba=ea.ey.extension;
else{ia();return}var ra=new XMLHttpRequest,qa=Object(z.k)(ea.fg,"AuxUpload");qa=Object(a.a)(qa,{type:aa,ext:ba});ra.open("POST",qa);ra.withCredentials=ea.kj();ma&&ra.setRequestHeader("Content-Type",ma);ra.addEventListener("load",function(){if(ra.readyState===ra.DONE&&200===ra.status){var sa=JSON.parse(ra.response);ea.rO=sa.uri;x(sa);ia(sa)}});ra.addEventListener("error",function(){ja(ra.statusText+" "+JSON.stringify(ra))});ea.up&&null!=ea.up.onProgress&&(ra.upload.onprogress=function(sa){ea.up.onProgress(sa)});
ra.send(fa)})};ca.prototype.zya=function(ea){this.password=ea||null;this.Vo.Fw()||(this.Vo=new e,this.Ii({t:"pages"}));return this.Vo.promise};ca.prototype.zC=function(ea){this.TO=ea||null;this.Vo.Fw()||this.Ii({t:"pages"});return this.Vo.promise};ca.prototype.Iz=function(ea){ea=Object.assign(ea,{uri:encodeURIComponent(this.rO)});this.TO&&(ea.ext=this.TO);this.Di&&(ea.c=this.Di);this.password&&(ea.pswd=this.password);this.wz&&(ea.cacheKey=this.wz);this.er&&(ea.officeOptions=this.er);this.Ef&&(ea.rastOptions=
this.Ef);this.xz&&(ea.cadOptions=this.xz.mImpl);return ea};ca.prototype.sza=function(){0<this.mx.length()&&10>=this.cv&&this.tza(this.mx.pop().data)};ca.prototype.wha=function(ea){0<this.mx.length()&&this.mx.contains(ea)&&this.mx.remove(ea)};ca.prototype.Ii=function(ea){ea=this.Iz(ea);this.wv.send(ea)};ca.prototype.r8=function(ea,fa){10<this.cv?this.mx.push(ea,fa):(this.cv++,ea=this.Iz(fa),this.wv.send(ea))};ca.prototype.tza=function(ea){this.cv++;ea=this.Iz(ea);this.wv.send(ea)};ca.prototype.Wn=
function(ea){return ea};ca.prototype.j3=function(ea){this.pU&&ea?Object(ha.j)("Server failed health check. Single server mode ignoring check."):!this.sGa&&ea&&3>=this.Bj?(this.tQ=!0,this.wv.Ks()):3<this.Bj&&(this.pU=!0)};ca.prototype.dva=function(ea){var fa=this,x=ea.data,ba=ea.err,aa=ea.t;switch(aa){case "upload":ba?this.PDa.reject(ba):this.PDa.resolve("Success");break;case "pages":ba?this.Vo.reject(ba):na(x,aa,this.Vo)&&this.Vo.resolve(x);break;case "config":if(ba)this.xs.reject(ba);else if(na(x,
aa,this.xs)){this.j3(x.unhealthy);x.id&&(this.id=x.id);if(x.auth){var ma=Object(b.a)("wvsQueryParameters");ma.auth=x.auth;Object(b.b)("wvsQueryParameters",ma)}x.serverVersion&&(this.SK=x.serverVersion,Object(ha.h)("[WebViewer Server] server version: "+this.SK));x.serverID?(this.Bj=x.serverID===this.w8&&this.tQ?this.Bj+1:0,this.w8=x.serverID):this.Bj=0;this.tQ=!1;this.xs.resolve(x)}break;case "health":ba?this.xs.reject(ba):na(x,aa,this.xs)&&this.j3(x.unhealthy);break;case "pdf":x.url=Object(a.a)(this.fg+
"../"+encodeURI(x.url));ba?this.Fg.reject(ba):na(x,aa,this.Fg)&&this.Fg.resolve(x);break;case "ApString2Xod":x.url=Object(a.a)(this.fg+"../data/"+encodeURI(x.url));ba?this.Mk[x.rID].reject(ba):na(x,aa,this.Mk[x.rID])&&this.Mk[x.rID].resolve(x);break;case "docmod":x.url=Object(a.a)(this.fg+"../"+encodeURI(x.url));ba?this.Mk[x.rID].reject(ba):na(x,aa,this.Fg)&&this.Mk[x.rID].resolve(x);break;case "xod":if(ba)this.Jf&&this.Jf.Gk()&&this.Jf.reject(ba),this.If&&this.If.Gk()&&this.If.reject(ba);else if(x.notFound)x.noCreate||
this.Jf&&this.Jf.Gk()&&this.Jf.resolve(x),this.If&&this.If.Gk()&&this.If.resolve(x);else{x.url&&(x.url=Object(a.a)(this.fg+"../"+encodeURI(x.url)));if(!this.If||this.If.Fw())this.If=new e,this.If.request={t:"xod",noCreate:!0};this.Jf||(this.Jf=new e,this.Jf.request={t:"xod"});this.If.resolve(x);this.Jf.resolve(x)}break;case "cAnnots":ma=this.Rg;if(ba)ma.reject(ba);else if(na(x,aa,ma)){ma.BT();var ia=[],ja=x.annots;x=function(Ga){var Fa=ja[Ga].s,Da=ja[Ga].e,Pa=ra.fg+"../"+encodeURI(ja[Ga].xfdf),Ja=
"true"===ja[Ga].hasAppearance?Object(a.a)(Pa+".xodapp"):null,Ka=Object(la.range)(Fa,Da+1);ia[Ga]={range:Ka,promise:new Promise(function(Oa,Ra){var Va=new XMLHttpRequest;Va.open("GET",Object(a.a)(Pa));Va.responseType="text";Va.withCredentials=fa.kj();Va.addEventListener("load",function(){Va.readyState===Va.DONE&&200===Va.status&&Oa({pu:Va.response,Jn:Ja,range:Ka})});Va.addEventListener("error",function(){Ra(Va.statusText+" "+JSON.stringify(Va))});Va.send()})}};var ra=this;for(ba=0;ba<ja.length;ba++)x(ba);
ma.resolve(ia)}break;case "annots":if(ba)this.Rg.reject(ba);else if(na(x,aa,this.Rg)){this.Rg.BT();var qa=new XMLHttpRequest;ma=this.fg+"../"+encodeURI(x.url);var sa=x.hasAppearance?Object(a.a)(ma+".xodapp"):null;qa.open("GET",Object(a.a)(ma));qa.responseType="text";qa.withCredentials=this.kj();qa.addEventListener("load",function(){qa.readyState===qa.DONE&&200===qa.status&&fa.Rg.resolve({pu:qa.response,Jn:sa})});qa.addEventListener("error",function(){fa.Rg.reject(qa.statusText+" "+JSON.stringify(qa))});
qa.send()}break;case "image":this.cv--;var ua=this.yi[x.p];ba?ua.promise.reject(ba):na(x,aa,ua)&&(ua.result=x,ua.result.url=Object(a.a)(this.fg+"../"+encodeURI(ua.result.url)),ua.resolve(ua.result));break;case "tiles":this.cv--;ua=x.rID;ma=this.nh[ua];this.nh[ua]=null;this.ZG.push(ua);if(ba)ma.reject(ba);else if(na(x,aa,ma)){for(ba=0;ba<x.tiles.length;ba++)x.tiles[ba]=Object(a.a)(this.fg+"../"+encodeURI(x.tiles[ba]));ma.resolve(x)}break;case "text":ua=this.Pk[x.p];if(ba)ua.reject(ba);else if(na(x,
aa,ua)){ua.BT();var xa=new XMLHttpRequest;x=Object(a.a)(this.fg+"../"+encodeURI(x.url));xa.open("GET",x);xa.withCredentials=this.kj();xa.addEventListener("load",function(){xa.readyState===xa.DONE&&200===xa.status&&(ua.result=JSON.parse(xa.response),ua.resolve(ua.result))});xa.addEventListener("error",function(Ga){ua.reject(xa.statusText+" "+JSON.stringify(Ga))});xa.send()}break;case "progress":"loading"===x.t&&this.trigger(r.a.Events.DOCUMENT_LOADING_PROGRESS,[x.bytes,x.total])}this.sza();!aa&&ea.echo&&
ea&&"apstring2xod"===ea.echo.t&&(ea=ea.echo.reqID)&&(2<=parseInt(this.SK,10)?this.Mk[ea].reject("Message unhandled by server"):this.Mk[ea].reject())};ca.prototype.zoa=function(){return Object(ka.b)(this,void 0,void 0,function(){return Object(ka.d)(this,function(ea){switch(ea.label){case 0:return[4,this.Zra()];case 1:return ea.ba(),[2,this.xs.promise]}})})};ca.prototype.eoa=function(ea){for(var fa=this,x=new XMLHttpRequest,ba=Object(a.a)(this.fg+"aul",{id:this.id}),aa=new FormData,ma={},ia=0;ia<ea.body.length;ia++){var ja=
ea.body[ia];ma[ja.id]=ja.eN.w+";"+ja.eN.h;aa.append(ja.id,ja.eN.dataString)}ea={t:"apstring2xod",reqID:this.p5++,parts:ma};var ra=this.Iz(ea);aa.append("msg",JSON.stringify(ra));this.Mk[ra.reqID]=new e;x.open("POST",ba);x.withCredentials=this.kj;ba=new Promise(function(qa,sa){x.onreadystatechange=function(){4===x.readyState&&(200===x.status?qa():sa("An error occurred while sending down appearance strings to the server"))}});x.send(aa);return ba.then(function(){return fa.Mk[ra.reqID].promise})};ca.prototype.oia=
function(){var ea=this.SK.split("-")[0].split("."),fa=["1","5","9"];if(3!==ea.length)throw Error("Invalid WVS version length.");if(3!==fa.length)throw Error("Invalid version length.");for(var x=0;x<ea.length;++x){if(fa.length===x||ea[x]>fa[x])return-1;if(ea[x]!==fa[x])return 1}return 0};ca.prototype.rs=function(){return 0>=this.oia()};ca.prototype.eP=function(){this.Rg||(this.Rg=new e,this.rs()?this.Rg.request={t:"cAnnots"}:this.Rg.request={t:"annots"},this.Ii(this.Rg.request));return this.Rg.promise};
ca.prototype.IJ=function(ea,fa){this.yi[fa]||(this.yi[fa]=new e,this.yi[fa].request={t:"image",p:fa},this.r8(ea,this.yi[fa].request));return this.yi[fa].promise};ca.prototype.Aya=function(ea){this.Pk[ea]||(this.Pk[ea]=new e,this.Pk[ea].request={t:"text",p:ea},this.Ii(this.Pk[ea].request));return this.Pk[ea].promise};ca.prototype.Bya=function(ea,fa,x,ba,aa){var ma=this.nh.length;this.ZG.length&&(ma=this.ZG.pop());this.nh[ma]=new e;this.nh[ma].request={t:"tiles",p:fa,z:x,r:ba,size:aa,rID:ma};this.r8(ea,
this.nh[ma].request);return this.nh[ma].promise};ca.prototype.R7=function(){this.Fg||(this.Fg=new e,this.Fg.request={t:"pdf"},this.O_?this.Fg.resolve({url:this.rO}):this.Ii(this.Fg.request));return this.Fg.promise};ca.prototype.Y1=function(ea){var fa=this,x=new XMLHttpRequest,ba=Object(a.a)(this.fg+"aul",{id:this.id}),aa=new FormData,ma={};ea.annots&&(ma.annots="xfdf");ea.watermark&&(ma.watermark="png");ea.redactions&&(ma.redactions="redact");ma={t:"docmod",reqID:this.p5++,parts:ma};ea.print&&(ma.print=
!0);var ia=this.Iz(ma);aa.append("msg",JSON.stringify(ia));return Promise.all([ea.annots,ea.watermark,ea.redactions].map(function(ja){return Promise.resolve(ja)})).then(function(ja){var ra=ja[0],qa=ja[1];ja=ja[2];ra&&aa.append("annots",ra);qa&&aa.append("watermark",qa);ja&&aa.append("redactions",ja);fa.Mk[ia.reqID]=new e;x.open("POST",ba);x.withCredentials=fa.kj;ra=new Promise(function(sa,ua){x.onreadystatechange=function(){4===x.readyState&&(200===x.status?sa():ua("An error occurred while sending down annotation data to the server"))}});
x.send(aa);return ra.then(function(){return fa.Mk[ia.reqID].promise})})};ca.prototype.T2=function(){this.If||(this.If=new e,this.If.request={t:"xod",noCreate:!0},this.Ii(this.If.request));return this.If.promise};ca.prototype.Cya=function(){this.Jf||(this.Jf=new e,this.Jf.request={t:"xod"},this.Ii(this.Jf.request));return this.Jf.promise};ca.prototype.kr=function(){return!0};ca.prototype.request=function(){};ca.prototype.f7=function(){};ca.prototype.abort=function(){for(var ea=0;ea<this.nh.length;ea++)this.nh[ea]&&
(this.nh[ea].resolve(null),this.nh[ea]=null,this.ZG.push(ea));this.close()};ca.prototype.WJ=function(ea){this.Di=this.Di||{};this.Di.headers=ea};ca.prototype.pr=function(ea){this.Di=this.Di||{};this.Di.internal=this.Di.internal||{};this.Di.internal.withCredentials=ea};ca.prototype.kj=function(){return this.Di&&this.Di.internal?this.Di.internal.withCredentials:null};ca.prototype.getFileData=function(){return Promise.reject()};return ca}();Object(wa.a)(h);Object(n.a)(h);Object(n.b)(h);ta["default"]=
h},577:function(wa,ta,h){var pa=h(0),na=h(3),oa=h(33),ka=h(52),la=h(202),ha=h(91),z=function(){function r(n,b,a,e,f,w){void 0===a&&(a=null);void 0===e&&(e=null);void 0===f&&(f=null);void 0===w&&(w=null);this.R4=!1;this.Bj=0;this.FZ=this.kEa(n);this.url=b?this.FZ+"/"+b:this.FZ+"/ws";this.fO=a;this.VB=e;this.Gz=f;this.VS=w}r.prototype.kEa=function(n){var b=n.indexOf("://"),a="ws://";0>b?b=0:(5===b&&(a="wss://"),b+=3);var e=n.lastIndexOf("/");0>e&&(e=n.length);return a+n.slice(b,e)};r.prototype.send=
function(n){this.Ar.readyState===WebSocket.CLOSED||this.R4||this.Ar.send(JSON.stringify(n))};r.prototype.gI=function(){return Object(pa.b)(this,void 0,void 0,function(){var n,b=this;return Object(pa.d)(this,function(){n=Object(ka.a)("wvsQueryParameters");n.bcid=Object(oa.l)(8);Object(ka.b)("wvsQueryParameters",n);return[2,new Promise(function(a,e){var f=Object(la.a)(b.url);b.Ar=new WebSocket(f);b.Ar.onopen=function(){b.VB&&b.VB();a()};b.Ar.onerror=function(w){b.R4=!0;e(w)};b.Ar.onclose=function(w){var ca=
w.code;return Object(pa.b)(b,void 0,void 0,function(){var ea=this;return Object(pa.d)(this,function(fa){switch(fa.label){case 0:return this.Gz&&this.Gz(),3E3===ca?[3,3]:8>this.Bj++?[4,new Promise(function(x){return setTimeout(function(){return Object(pa.b)(ea,void 0,void 0,function(){return Object(pa.d)(this,function(ba){switch(ba.label){case 0:return this.VS(),[4,this.gI()];case 1:return ba.ba(),x(),[2]}})})},3E3)})]:[3,2];case 1:return fa.ba(),[3,3];case 2:e(ha.a),fa.label=3;case 3:return[2]}})})};
b.Ar.onmessage=function(w){w&&w.data&&(w=JSON.parse(w.data),w.hb?b.send({hb:!0}):w.end?close():b.fO(w))}})]})})};r.prototype.Ks=function(n){void 0===n&&(n=!1);this.Bj=0;n?this.Ar.close(3E3):this.Ar.close();return Promise.resolve()};return r}(),y=function(){function r(n,b,a,e,f,w,ca){void 0===e&&(e=null);void 0===f&&(f=null);void 0===w&&(w=null);void 0===ca&&(ca=null);this.Bj=this.HJ=this.id=0;this.ZA=!1;this.request=null;n=this.Jwa(n);this.url=b?n+"/"+b+"pf":n+"/pf";this.LK=a;this.fO=e;this.VB=f;
this.Gz=w;this.VS=ca}r.prototype.Jwa=function(n){var b=n.lastIndexOf("/");0>b&&(b=n.length);return n.slice(0,b)};r.prototype.xja=function(n){n=n.split("\n");for(n[n.length-1]&&n.pop();0<n.length&&3>n[n.length-1].length;)"]"===n.pop()&&(this.id=0);0<n.length&&3>n[0].length&&n.shift();for(var b=0;b<n.length;++b)n[b].endsWith(",")&&(n[b]=n[b].substr(0,n[b].length-1));return n};r.prototype.d8=function(){return Object(pa.b)(this,void 0,void 0,function(){var n=this;return Object(pa.d)(this,function(b){switch(b.label){case 0:return 8>
this.Bj++?[4,new Promise(function(a){return setTimeout(function(){n.VS();n.gI();a()},3E3)})]:[3,2];case 1:b.ba(),b.label=2;case 2:return[2]}})})};r.prototype.Lwa=function(n){Object(pa.b)(this,void 0,void 0,function(){var b,a;return Object(pa.d)(this,function(e){switch(e.label){case 0:b=null,a=0,e.label=1;case 1:if(!(a<n.length))return[3,6];b=JSON.parse(n[a]);if(!b)return[3,5];if(!b.end)return[3,2];close();return[3,5];case 2:if(!b.id||Number(b.id)===this.id)return[3,4];Object(na.j)("Reconnecting, new server detected");
this.Ks();return[4,this.d8()];case 3:return e.ba(),[3,5];case 4:b.hb&&Number(b.id)===this.id?this.send({hb:!0}):this.ZA||this.fO(b),e.label=5;case 5:return++a,[3,1];case 6:return[2]}})})};r.prototype.$ua=function(n){Object(pa.b)(this,void 0,void 0,function(){var b,a,e;return Object(pa.d)(this,function(f){switch(f.label){case 0:if(!(3<=n.readyState))return[3,2];try{b=n.responseText.length}catch(w){return Object(na.h)("caught exception"),[2]}if(0<b)try{a=this.xja(n.responseText),0===this.id&&0<a.length&&
(e=JSON.parse(a.shift()),this.id=e.id,this.Bj=0),this.Lwa(a)}catch(w){}return this.ZA?[3,2]:[4,this.M0()];case 1:f.ba(),f.label=2;case 2:return[2]}})})};r.prototype.M0=function(){return Object(pa.b)(this,void 0,void 0,function(){var n=this;return Object(pa.d)(this,function(){return[2,new Promise(function(b,a){function e(){return Object(pa.b)(n,void 0,void 0,function(){return Object(pa.d)(this,function(w){switch(w.label){case 0:a(),this.Ks(),w.label=1;case 1:return this.ZA&&8>this.Bj?[4,this.d8()]:
[3,3];case 2:return w.ba(),[3,1];case 3:return[2]}})})}n.request=new XMLHttpRequest;n.request.withCredentials=n.LK;var f=Object(la.a)(n.url,0!==n.id?{id:String(n.id),uc:String(n.HJ)}:{uc:String(n.HJ)});n.HJ++;n.request.open("GET",f,!0);n.request.setRequestHeader("Cache-Control","no-cache");n.request.setRequestHeader("X-Requested-With","XMLHttpRequest");n.request.onreadystatechange=function(){n.$ua(n.request)};n.request.addEventListener("error",e);n.request.addEventListener("timeout",e);n.request.addEventListener("load",
function(){n.VB&&n.VB();b()});n.request.send()})]})})};r.prototype.gI=function(){var n=Object(ka.a)("wvsQueryParameters");n.bcid=Object(oa.l)(8);Object(ka.b)("wvsQueryParameters",n);this.HJ=this.id=0;this.ZA=!1;return this.M0()};r.prototype.send=function(n){var b=this,a=new XMLHttpRequest;a.withCredentials=this.LK;var e=Object(la.a)(this.url,{id:String(this.id)}),f=new FormData;f.append("data",JSON.stringify(n));a.addEventListener("error",function(){b.Ks()});a.open("POST",e);a.setRequestHeader("X-Requested-With",
"XMLHttpRequest");a.send(f)};r.prototype.Ks=function(){this.id=0;this.ZA=!0;this.Gz&&this.Gz();this.request.abort();return Promise.resolve()};return r}();wa=function(){function r(n,b,a){this.m_=n;this.target=b;this.LK=a}r.prototype.Mna=function(n,b,a,e,f){void 0===n&&(n=!0);void 0===b&&(b=null);void 0===a&&(a=null);void 0===e&&(e=null);void 0===f&&(f=null);return n?new z(this.m_,this.target,b,a,e,f):new y(this.m_,this.target,this.LK,b,a,e,f)};return r}();ta.a=wa}}]);}).call(this || window)
